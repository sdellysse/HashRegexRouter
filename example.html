<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
    <script src="http://github.com/cowboy/jquery-hashchange/raw/master/jquery.ba-hashchange.min.js"></script>
    <script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.4/underscore-min.js"></script>
    <script src="routes.js"></script>
    <script type="text/javascript">
      HashRegexRouter.match({
        regex: /^#!\/scenes$/,
        callback: function () {
          alert('/scenes')
        },
        around: function (callback, args) {
          alert('around before')
          callback.apply(callback, args)
          alert('around after')
        },
        before: function () {
          alert('before')
        },
        after: function () {
          alert('after')
        }
      })

      HashRegexRouter.match({
        regex: /^#!\/scenes\/([0-9]+)$/,
        callback: function (id) {
          alert('/scenes/' + id);
        }
      })
      HashRegexRouter.match({
        regex: /.*/,
        callback: function () {
          alert('/.*/')
        }
      })
      HashRegexRouter.start();
    </script>
  </head>
  <body>
  <a href="#!/scenes">a</a>
  <a href="#!/scenes/1201">b</a>
  <script type="text/javascript">document.write((new Date()).toString())</script>

  </body>
</html>

